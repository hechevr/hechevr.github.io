<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="It works on my machine">
<meta property="og:type" content="website">
<meta property="og:title" content="404 Not Found">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="404 Not Found">
<meta property="og:description" content="It works on my machine">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="404 Not Found">
<meta name="twitter:description" content="It works on my machine">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>404 Not Found</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">404 Not Found</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/11/ComputerAndNetworkSecurity/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/11/ComputerAndNetworkSecurity/" itemprop="url">ComputerAndNetworkSecurity</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-11T17:40:03+08:00">
                2019-09-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          The article has been encrypted, please enter your password to view.<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/09/11/ComputerAndNetworkSecurity/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/05/leetcode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/05/leetcode/" itemprop="url">leetcode 的刷题之旅</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-05T16:51:58+08:00">
                2019-09-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前已经刷过剑指offer和newcoder上的leetcode140题。如果感兴趣可以去看看那些文章。这篇博客主要是为了记录自己刷leetcode的过程，希望可以刷到300题左右（ps：我自己也不知道什么时候会太监）<br>话不多说，开始。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    1. Two Sum: unsorted array, find index</span></span><br><span class="line"><span class="comment">    sumbission: Runtime: 4 ms, faster than 99.70% of C++ online submissions for Two Sum.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> remaining = target - nums[i];</span><br><span class="line">            <span class="keyword">if</span> (mp.find(remaining) != mp.end()) &#123;</span><br><span class="line">                res.push_back(mp[remaining]);</span><br><span class="line">                res.push_back(i);</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                mp[nums[i]] = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    2. Add two numbers</span></span><br><span class="line"><span class="comment">    Runtime: 16 ms, faster than 97.55% of C++ online submissions for Add Two Numbers.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">addTwoNumbers</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        ListNode* header = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode* node = header;</span><br><span class="line">        <span class="keyword">int</span> carrier = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l1 || l2) &#123;</span><br><span class="line">            <span class="keyword">int</span> val = carrier;</span><br><span class="line">            <span class="keyword">if</span> (l1) val += l1-&gt;val;</span><br><span class="line">            <span class="keyword">if</span> (l2) val += l2-&gt;val;</span><br><span class="line">            carrier = val / <span class="number">10</span>;</span><br><span class="line">            val %= <span class="number">10</span>;</span><br><span class="line">            ListNode* tmp = <span class="keyword">new</span> ListNode(val);</span><br><span class="line">            node-&gt;next = tmp;</span><br><span class="line">            node = tmp;</span><br><span class="line">            <span class="keyword">if</span> (l1) l1 = l1-&gt;next;</span><br><span class="line">            <span class="keyword">if</span> (l2) l2 = l2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (carrier != <span class="number">0</span>) &#123;</span><br><span class="line">            ListNode* tmp = <span class="keyword">new</span> ListNode(carrier);</span><br><span class="line">            node-&gt;next = tmp;</span><br><span class="line">            node = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> header-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    3. Longest Substring Without Repeating Characters</span></span><br><span class="line"><span class="comment">    algorithm is quit easy. the thing need to be remembered is that always assign value to right pointer</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> mp[<span class="number">256</span>];</span><br><span class="line">        <span class="built_in">memset</span>(mp, <span class="number">0</span>, <span class="keyword">sizeof</span>(mp));</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = left;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mp[s[i]] == <span class="number">0</span>) &#123;</span><br><span class="line">                mp[s[i]] ++;</span><br><span class="line">                right = i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (right - left &gt; res) res = right - left; </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (; left &lt; right; left++) &#123;</span><br><span class="line">                    mp[s[left]]--;</span><br><span class="line">                    <span class="keyword">if</span> (s[left] == s[i]) &#123;</span><br><span class="line">                        mp[s[left]]++;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                left++;</span><br><span class="line">                right = i + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res = max(res, right - left);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    5. Longest Palindromic Substring</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">// method 1: dynamic programming. O(n^2)</span></span><br><span class="line">    <span class="comment">// Runtime: 68 ms, faster than 45.51% of C++ online submissions for Longest Palindromic Substring.</span></span><br><span class="line">    <span class="comment">// Memory Usage: 9.8 MB, less than 56.55% of C++ online submissions for Longest Palindromic Substring.</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestPalindrome2</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> size = s.size();</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) <span class="keyword">return</span> s;</span><br><span class="line">        <span class="keyword">bool</span> table[size][size];</span><br><span class="line">        <span class="built_in">memset</span>(table, <span class="number">0</span>, <span class="keyword">sizeof</span>(table));</span><br><span class="line">        table[size<span class="number">-1</span>][size<span class="number">-1</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = size<span class="number">-1</span>; j &gt;= i; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i] == s[j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j - i &lt;= <span class="number">1</span>) table[i][j] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (table[i+<span class="number">1</span>][j<span class="number">-1</span>]) table[i][j] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">if</span> (j - i &gt;= len &amp;&amp; table[i][j]) &#123;</span><br><span class="line">                        start = i;</span><br><span class="line">                        len = j - i;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substr(start, len + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>, start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class="line">            <span class="comment">// case 1: s[i] is the middle of palidrome</span></span><br><span class="line">            left = i;</span><br><span class="line">            right = i;</span><br><span class="line">            <span class="keyword">while</span> (left &gt;= <span class="number">0</span> &amp;&amp; right &lt;= s.size()<span class="number">-1</span> &amp;&amp; s[left] == s[right]) &#123;</span><br><span class="line">                left--;</span><br><span class="line">                right++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (len &lt; right-left<span class="number">-1</span>) &#123;</span><br><span class="line">                len = right-left<span class="number">-1</span>;</span><br><span class="line">                start = left+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// case 2: s[i] is the middle left of palidrome</span></span><br><span class="line">            <span class="keyword">if</span> (i &lt; s.size()<span class="number">-1</span> &amp;&amp; s[i] == s[i+<span class="number">1</span>]) &#123;</span><br><span class="line">                left = i;</span><br><span class="line">                right = i+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> (left &gt;= <span class="number">0</span> &amp;&amp; right &lt;= s.size()<span class="number">-1</span> &amp;&amp; s[left] == s[right]) &#123;</span><br><span class="line">                    left--;</span><br><span class="line">                    right++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (len &lt; right-left<span class="number">-1</span>) &#123;</span><br><span class="line">                    len = right-left<span class="number">-1</span>;</span><br><span class="line">                    start = left+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substr(start, len);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    6. ZigZag Conversion</span></span><br><span class="line"><span class="comment">    Runtime: 8 ms, faster than 93.37% of C++ online submissions for ZigZag Conversion.</span></span><br><span class="line"><span class="comment">    Memory Usage: 12.7 MB, less than 46.29% of C++ online submissions for ZigZag Conversion.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">convert</span><span class="params">(<span class="built_in">string</span> s, <span class="keyword">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (numRows == <span class="number">1</span>) <span class="keyword">return</span> s;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; vecstr(numRows, <span class="string">""</span>);</span><br><span class="line">        <span class="keyword">int</span> ptr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> down = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (ptr &lt; s.size()) &#123;</span><br><span class="line">            vecstr[flag] += s[ptr++];</span><br><span class="line">            <span class="keyword">if</span> (down) flag++;</span><br><span class="line">            <span class="keyword">else</span> flag--;</span><br><span class="line">            <span class="keyword">if</span> (flag &gt;= numRows) &#123;</span><br><span class="line">                down = <span class="literal">false</span>;</span><br><span class="line">                flag -= <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (flag &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                down = <span class="literal">true</span>;</span><br><span class="line">                flag += <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">string</span> res;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> ss : vecstr) &#123;</span><br><span class="line">            res += ss;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    7. Reverse Integer</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 68.24% of C++ online submissions for Reverse Integer.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8 MB, less than 100.00% of C++ online submissions for Reverse Integer.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x) &#123;</span><br><span class="line">            <span class="keyword">int</span> digit = x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">            res *= <span class="number">10</span>;</span><br><span class="line">            res += digit;</span><br><span class="line">            <span class="keyword">if</span> (res &gt; INT_MAX || res &lt; INT_MIN) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    8. String to Integer (atoi)</span></span><br><span class="line"><span class="comment">    Runtime: 8 ms, faster than 40.51% of C++ online submissions for String to Integer (atoi).</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.3 MB, less than 100.00% of C++ online submissions for String to Integer       (atoi).</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(<span class="built_in">string</span> str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (str.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ptr = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// move back until first unblank</span></span><br><span class="line">        <span class="keyword">for</span> (; ptr &lt; str.size() &amp;&amp; str[ptr] == <span class="string">' '</span>; ptr++);</span><br><span class="line">        <span class="comment">// sign of integer</span></span><br><span class="line">        <span class="keyword">if</span> (str[ptr] == <span class="string">'-'</span>) &#123;</span><br><span class="line">            flag = <span class="number">-1</span>;</span><br><span class="line">            ptr++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (str[ptr] == <span class="string">'+'</span>) &#123;</span><br><span class="line">            flag = <span class="number">1</span>;</span><br><span class="line">            ptr++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (; ptr &lt; str.size(); ptr++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[ptr] &lt; <span class="string">'0'</span> || str[ptr] &gt; <span class="string">'9'</span>) <span class="keyword">break</span>;</span><br><span class="line">            res *= <span class="number">10</span>;</span><br><span class="line">            res += str[ptr] - <span class="string">'0'</span>;</span><br><span class="line">            <span class="keyword">if</span> (res * flag &gt; INT_MAX) <span class="keyword">return</span> INT_MAX;</span><br><span class="line">            <span class="keyword">if</span> (res * flag &lt; INT_MIN) <span class="keyword">return</span> INT_MIN;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res * flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    9. Palindrome Number</span></span><br><span class="line"><span class="comment">    Runtime: 12 ms, faster than 72.81% of C++ online submissions for Palindrome Number.</span></span><br><span class="line"><span class="comment">    Memory Usage: 11.6 MB, less than 12.73% of C++ online submissions for Palindrome Number.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">0</span>) v.push_back(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (x) &#123;</span><br><span class="line">            <span class="keyword">int</span> digit = x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">            v.push_back(digit);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> half = v.size() / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= half; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v[i] != v[v.size()-i<span class="number">-1</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这一题其实蛮有趣的，可以和maxhistogram混合着看。这个要比柱状图简单。但是感觉柱状图更具有逻辑性。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    11. Container With Most Water</span></span><br><span class="line"><span class="comment">    Runtime: 20 ms, faster than 65.76% of C++ online submissions for Container With Most        Water.</span></span><br><span class="line"><span class="comment">    Memory Usage: 9.8 MB, less than 69.07% of C++ online submissions for Container With Most Water.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">// method 1: brute force search: O(n^2)</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxArea2</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> size = height.size();</span><br><span class="line">        <span class="keyword">int</span> area = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; size; j++) &#123;</span><br><span class="line">                area = max(area, min(height[i], height[j]) * (j-i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> area;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// method 2: for any two choices, drop the one that is impossible</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxArea</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = height.size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> area = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            area = max(area, min(height[left], height[right]) * (right-left));</span><br><span class="line">            <span class="keyword">if</span> (height[left] &lt; height[right]) &#123;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> right--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> area;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    12. Integer to Roman</span></span><br><span class="line"><span class="comment">    Runtime: 8 ms, faster than 74.82% of C++ online submissions for Integer to Roman.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.3 MB, less than 100.00% of C++ online submissions for Integer to Roman.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">intToRoman</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">string</span> res;</span><br><span class="line">        <span class="keyword">int</span> numOfM = num / <span class="number">1000</span>;</span><br><span class="line">        res += <span class="built_in">string</span>(numOfM, <span class="string">'M'</span>);</span><br><span class="line">        num -= numOfM * <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">900</span>) &#123;</span><br><span class="line">            res += <span class="string">"CM"</span>;</span><br><span class="line">            num -= <span class="number">900</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> numOfD = num / <span class="number">500</span>;</span><br><span class="line">        res += <span class="built_in">string</span>(numOfD, <span class="string">'D'</span>);</span><br><span class="line">        num -= numOfD * <span class="number">500</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">400</span>) &#123;</span><br><span class="line">            res += <span class="string">"CD"</span>;</span><br><span class="line">            num -= <span class="number">400</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> numOfC = num / <span class="number">100</span>;</span><br><span class="line">        res += <span class="built_in">string</span>(numOfC, <span class="string">'C'</span>);</span><br><span class="line">        num -= numOfC * <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">            res += <span class="string">"XC"</span>;</span><br><span class="line">            num -= <span class="number">90</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> numOfL = num / <span class="number">50</span>;</span><br><span class="line">        res += <span class="built_in">string</span>(numOfL, <span class="string">'L'</span>);</span><br><span class="line">        num -= numOfL * <span class="number">50</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">40</span>) &#123;</span><br><span class="line">            res += <span class="string">"XL"</span>;</span><br><span class="line">            num -= <span class="number">40</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> numOfX = num / <span class="number">10</span>;</span><br><span class="line">        res += <span class="built_in">string</span>(numOfX, <span class="string">'X'</span>);</span><br><span class="line">        num -= numOfX * <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">9</span>) &#123;</span><br><span class="line">            res += <span class="string">"IX"</span>;</span><br><span class="line">            num -= <span class="number">9</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> numOfV = num / <span class="number">5</span>;</span><br><span class="line">        res += <span class="built_in">string</span>(numOfV, <span class="string">'V'</span>);</span><br><span class="line">        num -= numOfV * <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">4</span>) &#123;</span><br><span class="line">            res += <span class="string">"IV"</span>;</span><br><span class="line">            num -= <span class="number">4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> numOfI = num / <span class="number">1</span>;</span><br><span class="line">        res += <span class="built_in">string</span>(numOfI, <span class="string">'I'</span>);</span><br><span class="line">        num -= numOfI * <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    13. Roman to Integer</span></span><br><span class="line"><span class="comment">    Runtime: 8 ms</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.3 MB</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">romanToInt</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mp[<span class="number">256</span>];</span><br><span class="line">        <span class="built_in">memset</span>(mp, <span class="number">0</span>, <span class="keyword">sizeof</span>(mp));</span><br><span class="line">        mp[<span class="string">'I'</span>] = <span class="number">1</span>;</span><br><span class="line">        mp[<span class="string">'V'</span>] = <span class="number">5</span>;</span><br><span class="line">        mp[<span class="string">'X'</span>] = <span class="number">10</span>;</span><br><span class="line">        mp[<span class="string">'L'</span>] = <span class="number">50</span>;</span><br><span class="line">        mp[<span class="string">'C'</span>] = <span class="number">100</span>;</span><br><span class="line">        mp[<span class="string">'D'</span>] = <span class="number">500</span>;</span><br><span class="line">        mp[<span class="string">'M'</span>] = <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = s.size()<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">int</span> addition = mp[s[i]];</span><br><span class="line">            <span class="keyword">if</span> (pre &lt;= addition) res += addition;</span><br><span class="line">            <span class="keyword">else</span> res -= addition;</span><br><span class="line">            pre = addition;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    14. Longest Common Prefix</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 94.86% of C++ online submissions for Longest Common Prefix.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.9 MB, less than 62.90% of C++ online submissions for Longest Common Prefix.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">// method 1: brute force</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestCommonPrefix2</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; strs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (strs.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">int</span> ptr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (; ptr &lt; strs[<span class="number">0</span>].size(); ptr++) &#123;</span><br><span class="line">            <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; strs.size(); i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (strs[i].size() &gt; ptr &amp;&amp; strs[i][ptr] == strs[<span class="number">0</span>][ptr]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    flag = <span class="literal">false</span>; </span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!flag) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> strs[<span class="number">0</span>].substr(<span class="number">0</span>, ptr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// method 2: sort and only neet to compare first and last</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestCommonPrefix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; strs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (strs.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (strs.size() == <span class="number">1</span>) <span class="keyword">return</span> strs[<span class="number">0</span>];</span><br><span class="line">        sort(strs.begin(), strs.end());</span><br><span class="line">        <span class="keyword">int</span> ptr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> size = strs.size() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> minlen = min(strs[<span class="number">0</span>].size(), strs[size].size());</span><br><span class="line">        <span class="keyword">for</span> (; ptr &lt; minlen; ptr++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (strs[<span class="number">0</span>][ptr] == strs[size][ptr]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> strs[<span class="number">0</span>].substr(<span class="number">0</span>, ptr);</span><br><span class="line">    &#125;     </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    15. 3Sum</span></span><br><span class="line"><span class="comment">    Runtime: 96 ms, faster than 82.78% of C++ online submissions for 3Sum.</span></span><br><span class="line"><span class="comment">    Memory Usage: 15.9 MB, less than 44.71% of C++ online submissions for 3Sum.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; threeSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; res;</span><br><span class="line">        sort(nums.begin(), nums.end());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">0</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> left = i + <span class="number">1</span>, right = nums.size() - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> remaining = <span class="number">0</span> - nums[i];</span><br><span class="line">            <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == left) &#123;</span><br><span class="line">                    left++;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (i == right) &#123;</span><br><span class="line">                    right--;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">int</span> s = nums[left] + nums[right];</span><br><span class="line">                <span class="keyword">if</span> (s &lt; remaining) &#123;</span><br><span class="line">                    left++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (s &gt; remaining) &#123;</span><br><span class="line">                    right--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp = &#123;nums[i], nums[left], nums[right]&#125;;</span><br><span class="line">                    res.push_back(tmp);</span><br><span class="line">                    <span class="keyword">for</span> (; left &lt; right &amp;&amp; nums[left+<span class="number">1</span>] == nums[left]; left++);</span><br><span class="line">                    <span class="keyword">for</span> (; left &lt; right &amp;&amp; nums[right<span class="number">-1</span>] == nums[right]; right--);</span><br><span class="line">                    left ++;</span><br><span class="line">                    right --;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    16. 3Sum Closest</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">threeSumClosest</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        sort(nums.begin(), nums.end());</span><br><span class="line">        <span class="keyword">int</span> res = INT_MAX;</span><br><span class="line">        <span class="keyword">int</span> solution = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> left = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> right = nums.size() - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> remaining = target - nums[i];</span><br><span class="line">            <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                <span class="keyword">int</span> s = nums[right] + nums[left];</span><br><span class="line">                <span class="keyword">if</span> (res &gt; <span class="built_in">abs</span>(remaining - s)) &#123;</span><br><span class="line">                    res = <span class="built_in">abs</span>(remaining - s);</span><br><span class="line">                    solution = nums[i] + s;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (s &lt; remaining) left++;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (s &gt; remaining) right--;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">return</span> target;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> solution;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    17. Letter Combinations of a Phone Number</span></span><br><span class="line"><span class="comment">    Runtime: 0 ms, faster than 100.00% of C++ online submissions for Letter Combinations of a Phone Number.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.5 MB, less than 91.43% of C++ online submissions for Letter Combinations of a Phone</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; letterCombinations(<span class="built_in">string</span> digits) &#123;</span><br><span class="line">        <span class="keyword">if</span> (digits.size() == <span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line">        mp.push_back(<span class="string">""</span>);</span><br><span class="line">        mp.push_back(<span class="string">""</span>);</span><br><span class="line">        mp.push_back(<span class="string">"abc"</span>);</span><br><span class="line">        mp.push_back(<span class="string">"def"</span>);</span><br><span class="line">        mp.push_back(<span class="string">"ghi"</span>);</span><br><span class="line">        mp.push_back(<span class="string">"jkl"</span>);</span><br><span class="line">        mp.push_back(<span class="string">"mno"</span>);</span><br><span class="line">        mp.push_back(<span class="string">"pqrs"</span>);</span><br><span class="line">        mp.push_back(<span class="string">"tuv"</span>);</span><br><span class="line">        mp.push_back(<span class="string">"wxyz"</span>);</span><br><span class="line">        </span><br><span class="line">        dfs(digits, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">string</span>&amp; digits, <span class="keyword">int</span> pos)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (pos == digits.size()) &#123;</span><br><span class="line">            <span class="built_in">string</span> s;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> c : tmp) &#123;</span><br><span class="line">                s += c;</span><br><span class="line">            &#125;</span><br><span class="line">            res.push_back(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">string</span> tem = mp[digits[pos]-<span class="string">'0'</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tem.size(); i++) &#123;</span><br><span class="line">                tmp.push_back(tem[i]);</span><br><span class="line">                dfs(digits, pos+<span class="number">1</span>);</span><br><span class="line">                tmp.pop_back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; mp;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; res;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; tmp;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    18. 4Sum</span></span><br><span class="line"><span class="comment">    Runtime: 12 ms, faster than 89.69% of C++ online submissions for 4Sum.</span></span><br><span class="line"><span class="comment">    Memory Usage: 9 MB, less than 100.00% of C++ online submissions for 4Sum.</span></span><br><span class="line"><span class="comment">    There are some tricks to reduce the calculation.</span></span><br><span class="line"><span class="comment">    1. skip the checking if following sum is greater than target</span></span><br><span class="line"><span class="comment">    2. skip the checking if the max possibility is smaller than target</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; fourSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; res;</span><br><span class="line">        <span class="keyword">if</span> (nums.size() &lt; <span class="number">4</span>) <span class="keyword">return</span> res;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        sort(nums.begin(), nums.end());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size()<span class="number">-3</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">0</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[i]+nums[i+<span class="number">1</span>]+nums[i+<span class="number">2</span>]+nums[i+<span class="number">3</span>] &gt; target) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= <span class="number">3</span> &amp;&amp; nums[i]+nums[n<span class="number">-1</span>]+nums[n<span class="number">-2</span>]+nums[n<span class="number">-3</span>] &lt; target) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; nums.size()<span class="number">-2</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j != i+<span class="number">1</span> &amp;&amp; nums[j] == nums[j<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (nums[i]+nums[j]+nums[j+<span class="number">1</span>]+nums[j+<span class="number">2</span>] &gt; target) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (nums[i]+nums[j]+nums[n<span class="number">-1</span>]+nums[n<span class="number">-2</span>] &lt; target) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> left = j+<span class="number">1</span>, right = nums.size()<span class="number">-1</span>;</span><br><span class="line">                <span class="keyword">int</span> rem = target - nums[i] - nums[j];</span><br><span class="line">                <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                    <span class="keyword">int</span> s = nums[left] + nums[right];</span><br><span class="line">                    <span class="keyword">if</span> (rem &gt; s) &#123;</span><br><span class="line">                        <span class="keyword">do</span> &#123;</span><br><span class="line">                            left++;</span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[left] == nums[left<span class="number">-1</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (rem &lt; s) &#123;</span><br><span class="line">                        <span class="keyword">do</span> &#123;</span><br><span class="line">                            right--;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[right] == nums[right+<span class="number">1</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp = &#123;nums[i], nums[j], nums[left], nums[right]&#125;;</span><br><span class="line">                        res.push_back(tmp);</span><br><span class="line">                        <span class="keyword">do</span> left++; <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[left] == nums[left<span class="number">-1</span>]);</span><br><span class="line">                        <span class="keyword">do</span> right--; <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[right] == nums[right+<span class="number">1</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    19. Remove Nth Node From End of List</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 85.71% of C++ online submissions for Remove Nth Node From End of List.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.6 MB, less than 73.68% of C++ online submissions for Remove Nth Node From End of List.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">removeNthFromEnd</span><span class="params">(ListNode* head, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        ListNode* hd = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        hd-&gt;next = head;</span><br><span class="line">        ListNode* parent = hd;</span><br><span class="line">        ListNode* ptr1 = head;</span><br><span class="line">        ListNode* ptr2 = head;</span><br><span class="line">        <span class="keyword">while</span> (ptr1 != <span class="literal">NULL</span> &amp;&amp; n &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            ptr1 = ptr1-&gt;next;</span><br><span class="line">            n--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (ptr1-&gt;next != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            ptr1 = ptr1-&gt;next;</span><br><span class="line">            parent = ptr2;</span><br><span class="line">            ptr2 = ptr2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        parent-&gt;next = ptr2-&gt;next;</span><br><span class="line">        <span class="keyword">delete</span> ptr2;</span><br><span class="line">        <span class="keyword">return</span> hd-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    20. Valid Parentheses</span></span><br><span class="line"><span class="comment">    Runtime: 0 ms, faster than 100.00% of C++ online submissions for Valid Parentheses.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.6 MB, less than 70.54% of C++ online submissions for Valid Parentheses.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isValid</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s.size() &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; st;</span><br><span class="line">        <span class="keyword">int</span> ptr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'('</span> || s[<span class="number">0</span>] == <span class="string">'['</span> || s[<span class="number">0</span>] == <span class="string">'&#123;'</span>) st.push(s[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        ptr++;</span><br><span class="line">        <span class="keyword">while</span> (ptr &lt; s.size()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[ptr] == <span class="string">'('</span> || s[ptr] == <span class="string">'&#123;'</span> || s[ptr] == <span class="string">'['</span>) st.push(s[ptr]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!st.empty()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[ptr] == <span class="string">')'</span> &amp;&amp; st.top() == <span class="string">'('</span>) st.pop();</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (s[ptr] == <span class="string">']'</span> &amp;&amp; st.top() == <span class="string">'['</span>) st.pop();</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (s[ptr] == <span class="string">'&#125;'</span> &amp;&amp; st.top() == <span class="string">'&#123;'</span>) st.pop();</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            ptr++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> st.empty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Runtime: 8 ms, faster than 76.89% of C++ online submissions for Merge Two Sorted Lists.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.8 MB, less than 95.08% of C++ online submissions for Merge Two Sorted Lists.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeTwoLists</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l1 == <span class="literal">NULL</span>) <span class="keyword">return</span> l2;</span><br><span class="line">        <span class="keyword">if</span> (l2 == <span class="literal">NULL</span>) <span class="keyword">return</span> l1;</span><br><span class="line">        ListNode* node;</span><br><span class="line">        <span class="keyword">if</span> (l1-&gt;val &lt; l2-&gt;val) &#123;</span><br><span class="line">            node = l1;</span><br><span class="line">            l1 = l1-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            node = l2;</span><br><span class="line">            l2 = l2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode* head = node;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="literal">NULL</span> &amp;&amp; l2 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l1-&gt;val &lt; l2-&gt;val) &#123;</span><br><span class="line">                node-&gt;next = l1;</span><br><span class="line">                l1 = l1-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                node-&gt;next = l2;</span><br><span class="line">                l2 = l2-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            node-&gt;next = l1;</span><br><span class="line">            l1 = l1-&gt;next;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l2 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            node-&gt;next = l2;</span><br><span class="line">            l2 = l2-&gt;next;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    22. Generate Parentheses</span></span><br><span class="line"><span class="comment">    Runtime: 0 ms, faster than 100.00% of C++ online submissions for Generate Parentheses.</span></span><br><span class="line"><span class="comment">    Memory Usage: 17.1 MB, less than 76.03% of C++ online submissions for Generate Parentheses.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; generateParenthesis(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line">        dfs(<span class="string">""</span>, n, n);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">string</span> str, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (left == <span class="number">0</span> &amp;&amp; right == <span class="number">0</span>) res.push_back(str);</span><br><span class="line">        <span class="keyword">if</span> (left &gt; <span class="number">0</span>) dfs(str+<span class="string">'('</span>, left<span class="number">-1</span>, right);</span><br><span class="line">        <span class="keyword">if</span> (right &gt; left) dfs(str+<span class="string">')'</span>, left, right<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    23. Merge k Sorted Lists</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Approach 3: merge 2 list iteratively</span></span><br><span class="line"><span class="comment">    Runtime: 20 ms, faster than 98.78% of C++ online submissions for Merge k Sorted Lists.</span></span><br><span class="line"><span class="comment">    Memory Usage: 10.8 MB, less than 91.67% of C++ online submissions for Merge k Sorted Lists.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">merge2Lists</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        <span class="function">ListNode <span class="title">head</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">        ListNode* node = &amp;head;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="literal">NULL</span> &amp;&amp; l2 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l1-&gt;val &lt; l2-&gt;val) &#123;</span><br><span class="line">                node-&gt;next = l1;</span><br><span class="line">                l1 = l1-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                node-&gt;next = l2;</span><br><span class="line">                l2 = l2-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            node-&gt;next = l1;</span><br><span class="line">            l1 = l1-&gt;next;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l2 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            node-&gt;next = l2;</span><br><span class="line">            l2 = l2-&gt;next;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeKLists</span><span class="params">(<span class="built_in">vector</span>&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (lists.size() &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = lists.size() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (right &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                lists[left] = merge2Lists(lists[left], lists[right]);</span><br><span class="line">                left++;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            left = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lists[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Approach 2: using heap to reduce the sort time. O(nlogk)</span></span><br><span class="line"><span class="comment">    Runtime: 28 ms, faster than 67.66% of C++ online submissions for Merge k Sorted Lists.</span></span><br><span class="line"><span class="comment">    Memory Usage: 11.1 MB, less than 69.05% of C++ online submissions for Merge k Sorted Lists.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> l1-&gt;val &gt; l2-&gt;val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeKLists3</span><span class="params">(<span class="built_in">vector</span>&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;ListNode*&gt; heap;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> l : lists) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l) heap.push_back(l);</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode* head = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode* node = head;</span><br><span class="line">        make_heap(heap.begin(), heap.end(), cmp);</span><br><span class="line">        <span class="keyword">while</span> (heap.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ListNode* tmp = heap[<span class="number">0</span>];</span><br><span class="line">            pop_heap(heap.begin(), heap.end(), cmp);</span><br><span class="line">            node-&gt;next = tmp;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">            heap.back() = heap.back()-&gt;next;</span><br><span class="line">            <span class="keyword">if</span> (!heap.back()) heap.pop_back();</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                push_heap(heap.begin(), heap.end(), cmp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Intuitive approach: search for a smallest node; O(k*N);</span></span><br><span class="line"><span class="comment">    Runtime: 608 ms, faster than 5.16% of C++ online submissions for Merge k Sorted Lists.</span></span><br><span class="line"><span class="comment">    Memory Usage: 11.4 MB, less than 41.67% of C++ online submissions for Merge k Sorted Lists.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeKLists2</span><span class="params">(<span class="built_in">vector</span>&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;ListNode*&gt; headlist;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lists.size(); i++) &#123;</span><br><span class="line">            ListNode* hd = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">            hd-&gt;next = lists[i];</span><br><span class="line">            headlist.push_back(hd);</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode* head = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode* node = head;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">bool</span> has = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; headlist.size(); i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (headlist[i]-&gt;next == <span class="literal">NULL</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (tmp == <span class="number">-1</span> || headlist[tmp]-&gt;next-&gt;val &gt; headlist[i]-&gt;next-&gt;val) &#123;</span><br><span class="line">                    has = <span class="literal">true</span>;</span><br><span class="line">                    tmp = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!has) <span class="keyword">break</span>;</span><br><span class="line">            node-&gt;next = headlist[tmp]-&gt;next;</span><br><span class="line">            headlist[tmp]-&gt;next = headlist[tmp]-&gt;next-&gt;next;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    24. Swap Nodes in Pairs</span></span><br><span class="line"><span class="comment">    Approach 2: recursive approach</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 68.94% of C++ online submissions for Swap Nodes in Pairs.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.7 MB, less than 75.00% of C++ online submissions for Swap Nodes in Pairs.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">swapPairs</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">NULL</span> || head-&gt;next == <span class="literal">NULL</span>) <span class="keyword">return</span> head;</span><br><span class="line">        ListNode* child = head-&gt;next;</span><br><span class="line">        ListNode* grandChild = child-&gt;next;</span><br><span class="line">        child-&gt;next = head;</span><br><span class="line">        </span><br><span class="line">        head-&gt;next = swapPairs(grandChild);</span><br><span class="line">        <span class="keyword">return</span> child;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Approach 1: iterative approach</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 68.94% of C++ online submissions for Swap Nodes in Pairs.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.5 MB, less than 100.00% of C++ online submissions for Swap Nodes in Pairs.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">ListNode* <span class="title">swapPairs2</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (head-&gt;next == <span class="literal">NULL</span>) <span class="keyword">return</span> head;</span><br><span class="line">        <span class="function">ListNode <span class="title">hd</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">        ListNode* parent = &amp;hd;</span><br><span class="line">        parent-&gt;next = head;</span><br><span class="line">        ListNode* nextParent = head-&gt;next-&gt;next;</span><br><span class="line">        ListNode* node = head;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">NULL</span> &amp;&amp; node-&gt;next != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            ListNode* child = node-&gt;next;</span><br><span class="line">            parent-&gt;next = child;</span><br><span class="line">            child-&gt;next = node;</span><br><span class="line">            node-&gt;next = nextParent;</span><br><span class="line">            </span><br><span class="line">            parent = node;</span><br><span class="line">            <span class="keyword">if</span> (nextParent == <span class="literal">NULL</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (nextParent-&gt;next == <span class="literal">NULL</span>) <span class="keyword">break</span>;</span><br><span class="line">            nextParent = nextParent-&gt;next-&gt;next;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hd.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    26. Remove Duplicates from Sorted Array</span></span><br><span class="line"><span class="comment">    Runtime: 20 ms, faster than 93.12% of C++ online submissions for Remove Duplicates from Sorted Array.</span></span><br><span class="line"><span class="comment">    Memory Usage: 9.9 MB, less than 96.25% of C++ online submissions for Remove Duplicates from Sorted Array.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ptr = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ptr == <span class="number">-1</span> || nums[ptr] != nums[i]) nums[++ptr] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ptr+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    27. Remove Element</span></span><br><span class="line"><span class="comment">    Runtime: 0 ms, faster than 100.00% of C++ online submissions for Remove Element.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.4 MB, less than 100.00% of C++ online submissions for Remove Element.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeElement</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ptr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] == val) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">else</span> nums[ptr++] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ptr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>重新总结一下KMP算法。KMP是为了匹配字段而产生的O(n+m)的一种算法。<br>首先，要计算移动table(DICT)。DICT表示对于pattern每一位和str不匹配时需要到达的ptr。用通俗的话来讲，把pattern写成如下形式，<br>pattern[prestr, …, poststr, …]，prestr和poststr相同，每一位表示自己之前可以写成prestr…poststr的形式，而dict每一位表示prestr的长度。<br>如AAAABAA，DICT=[0, 1, 2, 3, 0, 0, 1]。以最后一位A来讲，前面是AAAABAA，prestr=AA，poststr=AA。所以最后一位应当指向第二个A。<br>生成DICT可以用如下算法：<br>case1, dict[i]=dict[len]<br>case2, dict[i]!=dict[len] &amp;&amp; len != 0<br>case3, dict[i]!=dict[len] &amp;&amp; len == 0<br>其中，len是指前后缀的长度。<br>具体匹配时，用如下算法：<br>case1，str[i]=pattern[ptr] -&gt; i++, ptr++<br>case2, str[i]!=pattern[ptr] &amp;&amp; dict[i] != 0 -&gt; ptr = dict[i-1]<br>case3, str[i]!=pattern[ptr] &amp;&amp; dict[i] == 0 -&gt; i++<br>生成DICT需要m到2m的比较（最坏情况aaaaaaab）<br>匹配需要n到2n的比较（最坏情况以m为周期循环，即aaabaaabaaab，aaaa，比较次数为n/m*m+n=2n）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    28. Implement strStr()</span></span><br><span class="line"><span class="comment">    Runtime: 0 ms, faster than 100.00% of C++ online submissions for Implement strStr().</span></span><br><span class="line"><span class="comment">    Memory Usage: 9.5 MB, less than 10.00% of C++ online submissions for Implement strStr().</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Approach 2: KMP</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; generateDict(<span class="built_in">string</span> needle) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dict(needle.size(), <span class="number">0</span>);</span><br><span class="line">        dict[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; needle.size()) &#123;</span><br><span class="line">            <span class="comment">// character match</span></span><br><span class="line">            <span class="keyword">if</span> (needle[i] == needle[len]) &#123;</span><br><span class="line">                len++;</span><br><span class="line">                dict[i] = len;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (len != <span class="number">0</span>) &#123;</span><br><span class="line">                    len = dict[len<span class="number">-1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    dict[i] = <span class="number">0</span>;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dict;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">strStr</span><span class="params">(<span class="built_in">string</span> haystack, <span class="built_in">string</span> needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (needle.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> str1ptr = <span class="number">0</span>, str2ptr = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dict = generateDict(needle);</span><br><span class="line">        <span class="keyword">while</span> (str1ptr &lt; haystack.size()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str2ptr == needle.size()) <span class="keyword">return</span> str1ptr - str2ptr;</span><br><span class="line">            <span class="keyword">if</span> (haystack[str1ptr] == needle[str2ptr]) &#123;</span><br><span class="line">                str1ptr++;</span><br><span class="line">                str2ptr++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (str2ptr == <span class="number">0</span>) str1ptr++;</span><br><span class="line">                <span class="keyword">else</span> str2ptr = dict[str2ptr<span class="number">-1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (str2ptr == needle.size()) <span class="keyword">return</span> str1ptr - str2ptr;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Approach 1: brute force search. O(n^2)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">strStr2</span><span class="params">(<span class="built_in">string</span> haystack, <span class="built_in">string</span> needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (needle.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; haystack.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; needle.size() &amp;&amp; j+i &lt; haystack.size(); j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (needle[j] == haystack[i+j]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (j == needle.size()) <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    29. Divide Two Integers</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 77.46% of C++ online submissions for Divide Two Integers.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.1 MB, less than 90.00% of C++ online submissions for Divide Two Integers.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> dividend, <span class="keyword">int</span> divisor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> caldividend = dividend;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> caldivisor = divisor;</span><br><span class="line">        caldividend = <span class="built_in">abs</span>(caldividend);</span><br><span class="line">        caldivisor = <span class="built_in">abs</span>(caldivisor);</span><br><span class="line">        <span class="keyword">if</span> (caldividend &lt; caldivisor) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (caldividend &gt;= caldivisor) &#123;</span><br><span class="line">            <span class="keyword">long</span> <span class="keyword">long</span> base = caldivisor;</span><br><span class="line">            <span class="keyword">long</span> <span class="keyword">long</span> dou = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (base + base &lt;= caldividend) &#123;</span><br><span class="line">                base += base;</span><br><span class="line">                dou += dou;</span><br><span class="line">            &#125;</span><br><span class="line">            i += dou;</span><br><span class="line">            caldividend -= base;</span><br><span class="line">            <span class="keyword">if</span> ((dividend &lt; <span class="number">0</span> &amp;&amp; divisor &gt; <span class="number">0</span>) || (dividend &gt; <span class="number">0</span> &amp;&amp; divisor &lt; <span class="number">0</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i - INT_MAX &gt; <span class="number">1</span>) <span class="keyword">return</span> INT_MAX;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &gt; INT_MAX) <span class="keyword">return</span> INT_MAX;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ((dividend &lt; <span class="number">0</span> &amp;&amp; divisor &gt; <span class="number">0</span>) || (dividend &gt; <span class="number">0</span> &amp;&amp; divisor &lt; <span class="number">0</span>)) <span class="keyword">return</span> -i;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    31. Next Permutation</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 98.76% of C++ online submissions for Next Permutation.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.6 MB, less than 92.47% of C++ online submissions for Next Permutation.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">nextPermutation</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.size() &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> idx = nums.size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (; idx &gt;= <span class="number">0</span>; idx--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (idx &lt; nums.size()<span class="number">-1</span> &amp;&amp; nums[idx] &lt; nums[idx+<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (idx &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> idxx = nums.size()<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (; idxx &gt; idx; idxx--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[idxx] &gt; nums[idx]) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(nums[idx], nums[idxx]);</span><br><span class="line">        &#125;</span><br><span class="line">        sort(nums.begin()+idx+<span class="number">1</span>, nums.end());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    34. Find First and Last Position of Element in Sorted Array</span></span><br><span class="line"><span class="comment">    Approach 2: using 3 binary search to determin left and right boundary</span></span><br><span class="line"><span class="comment">    Runtime: 8 ms, faster than 84.59% of C++ online submissions for Find First and Last Position of Element in Sorted Array.</span></span><br><span class="line"><span class="comment">    Memory Usage: 10.1 MB, less than 100.00% of C++ online submissions for Find First and Last Position of Element in Sorted Array.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; searchRange2(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="comment">// binary search</span></span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (nums[mid] &gt; target) &#123;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mid &lt; nums.size() &amp;&amp; nums[mid] == target) &#123;</span><br><span class="line">            left = searchLeft(nums, <span class="number">0</span>, mid, target);</span><br><span class="line">            right = searchRight(nums, mid, nums.size()<span class="number">-1</span>, target);</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res = &#123;left, right&#125;;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res = &#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">searchLeft</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mid;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (mid &gt; left &amp;&amp; nums[mid] == nums[mid - <span class="number">1</span>]) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">searchRight</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mid;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt; target) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (mid &lt; right &amp;&amp; nums[mid] == nums[mid + <span class="number">1</span>]) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Approach 1: binary search + linear scan. worst case O(n)</span></span><br><span class="line"><span class="comment">    Runtime: 12 ms, faster than 30.55% of C++ online submissions for Find First and Last    Position of Element in Sorted Array.</span></span><br><span class="line"><span class="comment">    Memory Usage: 10.3 MB, less than 93.41% of C++ online submissions for Find First and Last Position of Element in Sorted Array.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; searchRange(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="comment">// binary search</span></span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (nums[mid] &gt; target) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mid &lt; nums.size() &amp;&amp; nums[mid] == target) &#123;</span><br><span class="line">            left = mid;</span><br><span class="line">            right = mid;</span><br><span class="line">            <span class="keyword">while</span> (left &gt;= <span class="number">0</span> &amp;&amp; nums[left] == target) left--;</span><br><span class="line">            <span class="keyword">while</span> (right &lt;= nums.size()<span class="number">-1</span> &amp;&amp; nums[right] == target) right++;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res = &#123;left+<span class="number">1</span>, right<span class="number">-1</span>&#125;;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res = &#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    35. Search Insert Position</span></span><br><span class="line"><span class="comment">    Runtime: 4 ms, faster than 98.49% of C++ online submissions for Search Insert Position.</span></span><br><span class="line"><span class="comment">    Memory Usage: 8.7 MB, less than 100.00% of C++ online submissions for Search Insert Position.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">searchInsert</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] == target) &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">                <span class="keyword">if</span> (mid + <span class="number">1</span> &lt;= right &amp;&amp; nums[mid + <span class="number">1</span>] &gt; target) <span class="keyword">return</span> mid + <span class="number">1</span>;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (mid - <span class="number">1</span> &gt;= left &amp;&amp; nums[mid - <span class="number">1</span>] &lt; target) <span class="keyword">return</span> mid;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mid &gt;= <span class="number">0</span> &amp;&amp; nums[mid] &lt; target) <span class="keyword">return</span> mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (mid &gt;= <span class="number">0</span> &amp;&amp; nums[mid] &gt; target) <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/24/computer_system_conclusion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/24/computer_system_conclusion/" itemprop="url">计算机系统总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-24T23:22:43+08:00">
                2019-07-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>抽空把深入了解计算机系统简要看了一遍。这里做个小总结。</p>
<h3 id="计算机系统的基本特性"><a href="#计算机系统的基本特性" class="headerlink" title="计算机系统的基本特性"></a>计算机系统的基本特性</h3><p>并发，共享，虚拟，异步。<br>并发指在计算机系统中同一时间段内共同运行着多个程序。（区别并行）具体包括用户程序与用户程序，用户程序与系统程序。<br>共享指操作系统程序和多个用户程序共享系统资源（包括cpu运行时间，内存分配）。<br>虚拟（主要指Virtual Memory）指通过技术使得物理实体对应虚拟逻辑对象。如虚拟内存将物理内存对应到程序享用的虚拟地址，这样每个进程都仿佛独占内存。<br>异步。同步异步是一个重要的区分特性。同步指几个进程指令需要有先后的执行，如操作一必须在操作二完成后开始执行。而异步指的是进程以不可预知的速度向前推进。每个进程何时执行，合适暂停，以何样的速度推进都是不可预知的。（好像和我理解的异步有点不一样）</p>
<h3 id="操作系统的主要功能"><a href="#操作系统的主要功能" class="headerlink" title="操作系统的主要功能"></a>操作系统的主要功能</h3><p>进程控制，进程同步，进程通信，调度。<br>临界资源：一次只能宫一个进程访问的资源。临界区：访问临界区的程序。当一个进程进入临界区时，其他进程无法进入临界区。<br>对临界区加锁可以实现互斥。mutex和semphore都可以充当锁子。<br>进程同步指的是在异步环境下一组并发进程通过相互发送消息进行互相合作，互相等待，使得各自进程按照一定速度执行的过程。<br>进程通信：进程间通信有五种方式，分别是pipe，FIFO，signal，semaphore，共享内存。<br>pipe：单向，有亲缘，只存在于内存中（通过read，write读写）。<br>FIFO：命名管道，无关进程也可以交换数据。以文件形式存在文件系统中。<br>signal：消息链接表，存放在内核中。根据优先级来确定先后，独立于发送接收进程（进程终止，队列仍旧存在），可以实现随机查询，无关次序。<br>semaphore：计数器。P：wait until &gt; 0，semaphore-=1；V：semaphore+=1。用于进程同步，原子操作（即只存在执行或不执行，没有中间状态）。<br>共享内存：最快的通信方式。在内存中开辟一块供多个进程操作。需要配合semaphore。<br>操作系统的任务调度：FIFO(FCFS)，SJF(Shortest job first)，Round Robin，多层反馈队列，高响应比优先调度。<br>Round Robin：每个就绪进程获得一小段CPU时间，时间段用完后，进程交出cpu，重新回到就绪队列，等待下一次分配。<br>多层反馈队列：将任务分配到不同优先级的队列中。有以下几个规则。</p>
<ol>
<li>开始时所有任务都是最高优先级。2. 如果任务在规定时间片中没有执行完毕（没有block）则将他下放到下一个优先级。3.每隔一段时间，重新分配优先级（即将所有任务放到最高级中）。<br>高响应比优先调度。对每一个就绪进程计算相应比，执行最高的那个。相应比=（等待时间+执行时间）/执行时间</li>
</ol>
<h3 id="线程与进程"><a href="#线程与进程" class="headerlink" title="线程与进程"></a>线程与进程</h3><p>进程是系统分配资源和调度的基本单位。当一个程序要执行时，系统会建立进程并为其分配资源。<br>线程是进程的一个实体。一个进程可以有一个或多个线程。线程自己不拥有资源，但是可以对进程的资源进行操作。<br>线程之间可以共享的部分：数据段，代码段，堆，File Descriptor（文件描述表）。线程之间不可以共享的部分：stack，program counter，register state。<br>线程与进程的区别：进程是一个具有独立功能的活动，进程之间相互独立，通信需要通过核来完成。线程本省不具备资源，他是系统计算统筹的单位。进程有独立的地址空间，一段崩溃后，不会影响其他进程。线程则没有独立的地址空间，一旦线程出现了问题，则整个进程都都会崩溃。进程切换时要比线程消耗大。</p>
<h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><p>死锁指在多个并发（很重要）进程中，如果每个进程持有某种资源而又等待别的进程释放资源，并且维持这种状态都不能推进的一种状态。<br>条件：1. 互斥。一个资源只能被一个进程使用。2. 不可抢占。进程不能从别人手中抢占资源。3. 不释放。进程在自己等待状态不释放已有资源。4. 进程与资源形成闭合环路状态。<br>银行家算法：每一个进程进入系统时，先声明自己可能需要的资源总量。系统在选择执行某一个任务前，先检查该任务是否安全。即假如满足所选任务的需求，是否还有足够的资源满足剩下资源需求最大的进程的请求。如果安全，则分配执行，否则，该进程会被阻塞。<br>银行家算法是一种预防死锁的方法，而并非打破死锁的方法。打破死锁需要破坏其四条条件之一。1. 强制资源可以共享。2. 进程可以抢占已被占有的资源。3. 进程在阻塞情况下释放自己经占有的资源。4. 检查是否闭合环路。</p>
<h3 id="连续分配方式"><a href="#连续分配方式" class="headerlink" title="连续分配方式"></a>连续分配方式</h3><p>为一个用户程序分配一个连续的内存空间。可以分为单一连续分配，固定分区分配，动态分区分配，动态重定位分区分配。<br>单一连续分配：将内存分为系统区（内存低端）和高地址（内存高端）。静态分配（作业一旦进入，等待运行结束才可以释放内存）。适用于单用户单任务的os。<br>固定分区分配：内存空间划分为若干个固定大小的分区。一个作业装入一个分区。<br>动态分区分配：在作业进入内存时，根据作业大小动态的建立分区。1. 基于顺序搜索的动态分区分配算法。2. 基于索引搜索的动态分区分配算法。<br>动态重定位分区分配：同动态分区分配基本一致，增加了“紧凑”。如果没有单一连续空间满足需求，则将其他任务所使用的空间堆积在一起。</p>
<h3 id="虚拟储存器"><a href="#虚拟储存器" class="headerlink" title="虚拟储存器"></a>虚拟储存器</h3><p>在主存中只保存活动区域，其余所需数据放在disk（磁盘）中。<br>从程序角度来看，程序可以申请超过内存本身大小的空间。所申请的虚拟页，存放在内存和硬盘中。<br>虚拟页可以分为已缓存（在内存中），为缓存（在disk中），未分配（没有数据与其关联）。<br>程序访问为缓存和未分配状态的page都会造成缺页中断。<br>缺页中断在实际操作中的表现为程序访问某一虚拟地址，其对应的page table validation bit为0.<br>产生缺页中断后，会采用LRU（least recently used）算法挑选一个牺牲页面同disk中的请求页置换。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/13/reactor-nodejs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/13/reactor-nodejs/" itemprop="url">reactor模型和nodejs的实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-13T10:47:03+08:00">
                2019-07-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="reactor"><a href="#reactor" class="headerlink" title="reactor"></a>reactor</h2><h3 id="同步，异步，阻塞，非阻塞"><a href="#同步，异步，阻塞，非阻塞" class="headerlink" title="同步，异步，阻塞，非阻塞"></a>同步，异步，阻塞，非阻塞</h3><p>Synchronous IO: operatins causes the requesting process to be blocked until that io operation completes.<br>Asychronrous IO: operations that does not cause the requesting process to be blocked.<br>阻塞：程序会自己挂起等待结果。<br>非阻塞：如果数据没有准备好，程序不关系结果直接返回。需要程序自己回去检查数据是否就绪。</p>
<p>简单来讲，同步针对的是程序和kernel的通信。如果一个操作会返回结果（数据准备好或者没准备好），那么这个call就是同步的。反之，如果一个call不返回结果（我不知道数据怎么样，需要kernel自己回调函数），那么这个call就是异步的。<br>所以，同步可以阻塞也可以非阻塞，看程序本身如何应对返回结果（是直接从kernel拷贝数据还是先返回）。<br>异步只能非阻塞（因为异步表示kernel会将所有东西准备好然后回调函数，所以不存在call需要等待的情况）。</p>
<p>如果一个call需要自己去查询数据是否就绪，则一定为同步（epoll很tricky，虽然运用了callback，但仍旧需要epoll_wait去检查，所以是同步的）<br>select/poll/epoll都是同步。<br>如果epoll_wait(timeout)timeout=-1，阻塞（知道捕获到信号）。timeout=0，非阻塞，直接返回。timeout&gt;0阻塞n毫秒。</p>
<p>总结，IO call分为两步</p>
<ol>
<li>询问数据是否就绪。</li>
<li>将数据从kernal拷贝到进程。<br>同步异步针对两个步骤，任何一个阻塞，都为同步。<br>阻塞非阻塞针对步骤1，步骤二不理会。</li>
</ol>
<h3 id="reactor的特点"><a href="#reactor的特点" class="headerlink" title="reactor的特点"></a>reactor的特点</h3><ol>
<li>事件驱动</li>
<li>处理多个输入源</li>
<li>通过service handler同步的将输入事件（event）采用多路复用（select/poll/epoll）分发给相应的request handler同步的将输入事件（event）采用多路复用（select/poll/epoll）分发给相应的request handler处理。</li>
</ol>
<p>单线程reactor：一个线程来处理连接，读写，计算。消息的处理被放到独立的handler中。<br><img src="reactor_single.png" alt></p>
<p><img src="reactor_multi.png" alt><br>多线程reactor：为handler开启不同的县城。</p>
<p><img src="reactor.png" alt><br>主从reactor模型：main reactor针对连接，subreactor针对io操作。</p>
<h2 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h2><p><img src="nodejs_framework.png" alt><br>由上图可知，nodejs包括顶层的javascript（程序员层面）和底层的V8, libuv（底层io实现）。<br>JS层面，程序是同步阻塞单线程的。如果语句出现问题，则整个程序卡住。<br>事件循环函数会不断检查事件队列中有没有需要处理的时间，直到程序结束。此循环对开发者不可见，由libuv实现。<br>libuv是一个底层的用c实现的异步io库。通过主线程检查事件队列，线程池来处理不同handler。</p>
<p>nodejs编写简单，处理并发时有独特的优势。然而，当某需求需要在js上大量的cpu计算时，单线程的劣势就体现出来了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/09/Select-poll-epoll/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/09/Select-poll-epoll/" itemprop="url">Select_poll_epoll</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-09T00:09:55+08:00">
                2019-07-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h3><p><img src="select.png" alt></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">select</span><span class="params">(<span class="keyword">int</span> nfds, fd_set* readfds, fd_set* writefds, fd_set* exceptfds, struct timeval* timeout)</span></span>;</span><br></pre></td></tr></table></figure>

<p>监控三组descriptor。并且block进程，如果有descriptor数据就绪，则返回。<br>使用时需要遍历descriptor list。<br>缺点：</p>
<ol>
<li>每次调用select，需要把fd集合从用户空间拷贝到kernel，开销会随着fd增多而增大。</li>
<li>调用select都需要在内核便利传递来的所有fd，开销会随着fd增多增大。</li>
<li>支持文件描述符数量较小。</li>
</ol>
<h3 id="Poll"><a href="#Poll" class="headerlink" title="Poll"></a>Poll</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">poll</span><span class="params">(struct pollfd* fds, <span class="keyword">nfds_t</span> nfds, <span class="keyword">int</span> timeout)</span></span>;</span><br></pre></td></tr></table></figure>

<p>相对于select的优点：</p>
<ol>
<li>集合了所有descriptor。</li>
<li>没有文件描述符数量的限制。<br>缺点：在fds很大时效率很低。和select没有本质区别。</li>
</ol>
<h3 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_create</span><span class="params">(<span class="keyword">int</span> size)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_wait</span><span class="params">(<span class="keyword">int</span> epfd, struct epoll_event* events, <span class="keyword">int</span> maxevents, <span class="keyword">int</span> timeout)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_ctl</span><span class="params">(<span class="keyword">int</span> epfd, <span class="keyword">int</span> op, <span class="keyword">int</span> fd, struct epoll_event* event)</span></span>;</span><br></pre></td></tr></table></figure>

<p>每次注册新事件时，会把所有的fd拷贝进内核，因此，每个fd在整个过程中会被拷贝一次。<br>在epoll_ctl时会把current遍历一遍，为每一个fd制定回调函数。当设备就绪时，回调函数会被call（把就绪的fd加入就绪链表）。<br>epoll_wait的工作是查看就绪链表，因此不需要每次新设备出现时都便利fd。</p>
<p>mmap：内存映射文件。文件磁盘地址和进程虚拟地址空间中一段虚拟地址一一对应。内核空间对文件的修改直接反应用户空间，可以实现不同进程间的文件共享。<br>epoll就用了mmap，所以速度会快一些。</p>
<p><img src="select_poll_epoll.png" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/03/project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/03/project/" itemprop="url">project</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-03T21:25:37+08:00">
                2019-07-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/玩具/" itemprop="url" rel="index">
                    <span itemprop="name">玩具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一时兴起决定写写爬虫来当学生项目。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://www.qiushibaike.com/"</span></span><br><span class="line">tag = <span class="string">"hot/page/1"</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'User-Agent:Mozilla/5.0'</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url+tag, headers=headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content = response.read()</span><br><span class="line">content_utf8 = content.decode(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">restr = <span class="string">'&lt;div class="article.*?&lt;div class="author.*?&lt;h2&gt;(.*?)&lt;/h2&gt;.*?&lt;/div&gt;.*?href="/article/(.*?)".*?&lt;span&gt;(.*?)&lt;/span&gt;.*?&lt;/div&gt;'</span></span><br><span class="line">pattern = re.compile(restr, re.S)</span><br><span class="line">items = re.findall(pattern, content_utf8)</span><br><span class="line">write_html(content)</span><br></pre></td></tr></table></figure>

<p>扒了糗事百科首页上的作者，链接。<br>目前打算是写一个自动爬段子分类推送的系统。然而发现现在的网站都坏坏，一个个的都不给人爬了。一会限制访问一会网站验证的。任重而道远啊。</p>
<p>更新：<br>爬虫计划暂停。感觉自己需要一个大项目把所有知识整合起来。一时兴起又决定写一个小的数据库。具体能完成到什么样子我也不知道。希望至少可以做成本地多线程磁盘缓存版本吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/28/computer-system/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/computer-system/" itemprop="url">computer system</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T23:54:50+08:00">
                2019-06-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Reference: comptuer system: a programmer’s perspective<br>Related course: <a href="https://ipads.se.sjtu.edu.cn/courses/ics/" target="_blank" rel="noopener">Introduction to computer systems</a></p>
<h3 id="Memory-hierarchy"><a href="#Memory-hierarchy" class="headerlink" title="Memory hierarchy"></a>Memory hierarchy</h3><p>memory = RAM + ROM + Hard Disk</p>
<h4 id="RAM"><a href="#RAM" class="headerlink" title="RAM"></a>RAM</h4><p>RAM = DRAM + SRAM<br>RAM is volatile memories -&gt; loss data if powered off</p>
<table>
<thead>
<tr>
<th>category</th>
<th>transistor per bit</th>
<th>access time</th>
<th>persist</th>
<th>sensitive</th>
<th>cost</th>
<th>applications</th>
</tr>
</thead>
<tbody><tr>
<td>SRAM</td>
<td>6</td>
<td>fastest</td>
<td>yes</td>
<td>no</td>
<td>expensive</td>
<td>cache</td>
</tr>
<tr>
<td>DRAM</td>
<td>1</td>
<td>fast</td>
<td>no</td>
<td>yes</td>
<td>less exp</td>
<td>main memories</td>
</tr>
</tbody></table>
<h4 id="ROM"><a href="#ROM" class="headerlink" title="ROM"></a>ROM</h4><p>ROM is nonvolatile memories<br>ROM:BIOS, graphics card, disk controllers</p>
<p>Hard disk = several platters<br>platter = 2 surfaces<br>surface = multiple tracks<br>track = lots of sectors</p>
<p>Access time = seek time (seek for track) + rotation time (wait for sector) + transfer time (data transfer)<br>Example: T = 9ms + 4ms + 0.02ms -&gt; seek time and rotation time dominate the access time.</p>
<p>I/O port: address reserved for the communication between cpu and I/O device.</p>
<p>Routine for cpu access disk:</p>
<ol>
<li>cpu initiates a disk read by writing a command, logical block number and destination memory address to a port</li>
<li>Disk controller reads sector and perform a DMA (no CPU) transfer into main memory(RAM).</li>
<li>Disk controller send interrupt to cpu. (could be singal in pin or information on bus).</li>
<li>CPU read from memory.</li>
</ol>
<p><img src="architecture.png" alt></p>
<h4 id="SSD"><a href="#SSD" class="headerlink" title="SSD"></a>SSD</h4><p>SSD stands for Solid State Disk. It is a storage technology based on flash memory.<br>Charasteristic of SSD: </p>
<ol>
<li>Data read/write in units of pages(pages form block)</li>
<li>Page can be written only after the blocks are erased.</li>
<li>Could be wears out.</li>
<li>No moving part-&gt;faster, less power.</li>
</ol>
<p>The gap between the speed of CPU and memory is widthen. We use locality and memory hierarchy to decrease the time of memory process.<br>Locality: Pragrams tend to use data and instructions with address near or equal to those they have used recently.<br>Temporal locality: recently used.<br>Spatial locality: nearby.</p>
<p>![](memory_hierarchy.png]<br>Memory hierarchy: Register-&gt;L1, L2, L3 cache(SRAM)-&gt;Main memory(DRAM)-&gt;Local disks.<br>Low level memory serves as caches for high level memory.<br>Because of the locality, hierarchy memory could be a good solution for fasten the progress on memory.</p>
<p>Generic Cache memory organization:<br>cache = sets = valid(1bit) + tag(block index in physical memory) + blocks<br>physical address = tag(block index) + set index + block offset</p>
<p>physical address -&gt; cache:<br>select set -&gt; Line matching(valid number, tag) -&gt; word extraction(according to block offset)</p>
<h3 id="Read"><a href="#Read" class="headerlink" title="Read"></a>Read</h3><p>conflict-&gt;same cache lines will be filled by different physical address multiple times.</p>
<p>Why using middle bits as index? the middle bits will make the physical memory caches mapping more fluent. Consecutive memory lines map to different caches lines.</p>
<p>To find the lines in same set. Using tags.</p>
<p>The physical memory will only determine which sets will be used. If all the lines in the same sets are filled, which line will be evicted?<br>LFU: least frequently used.<br>LRU: least recently used.</p>
<p>Set associative caches: several sets. each set contains several lines.<br>Fully associative caches: one sets. contain all the lines.</p>
<h3 id="Write"><a href="#Write" class="headerlink" title="Write"></a>Write</h3><p>Modern Implementation: write back, write allocate<br>write through: cpu write into caches and copy data from caches into memory.<br>write back: cpu write into caches, copy data into memory only if the caches will be evicted.<br>write allocate: land the corrend memory block into cache, then updates the cache block.<br>no-write-allocate: bypass the cache and write toe word directly memory.</p>
<p>Miss rate: memory not found in cache. 3-10% for L1. can be small for L2.<br>Hit rate: fraction of memory found in cache(1-Miss rage).<br>Hit time: time to deliver a line in the cache to processor.<br>Miss Penalty: additional time required because of a miss.</p>
<p>How to write cache-frendly code? better locality. lower miss rates.<br>Temporal locality: repeated references to local variables-&gt;compiler will cache the data in register.<br>Spatial locality: stride-1 references patterns-&gt;contiguous blocks will be stored in caches.</p>
<p><img src="cpu_architecture.jpg" alt></p>
<h3 id="Linking"><a href="#Linking" class="headerlink" title="Linking"></a>Linking</h3><p>Linking can be performed 1. at compile time(static linking). 2. at load time(load time dynamic linking). 3. at run time(run-time dynamic link).<br>compiling: preprocessor(cpp), compiler(cc1), assembler(as), linker(ld).</p>
<h4 id="Static-Linking"><a href="#Static-Linking" class="headerlink" title="Static Linking"></a>Static Linking</h4><p>relocatable object files(*.o) -&gt; Fully linked executable object<br>Esternal reference: reference to a symbol defined in another object file. (values close to 0).<br>Symbol resolution: resolved external references.</p>
<h4 id="Dynamic-linking"><a href="#Dynamic-linking" class="headerlink" title="Dynamic linking"></a>Dynamic linking</h4><p>DLL/so files that will be load at run time or load time. For load time dynamic linking, there is a stub in the binary code that tell the system to load some resource from the shared library. Only after the resource is loaded, the program will start to run.<br>Run-time dynamic linking do not ask system to load resource at load time. In windows, GetProcAddress API will load the library at run time.</p>
<h4 id="Executable-and-linkable-format"><a href="#Executable-and-linkable-format" class="headerlink" title="Executable and linkable format"></a>Executable and linkable format</h4><p>standard binary format for object files. Unified format for relocatable object(.o), executable object files and shared object files(.so).</p>
<h4 id="Command-in-GCC"><a href="#Command-in-GCC" class="headerlink" title="Command in GCC"></a>Command in GCC</h4><p>Create dynamic library in GCC:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -shared hello.c -o libhello.so</span><br></pre></td></tr></table></figure>

<p>Link libhello.so to executable:<br>-l link library. -L library position. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc test.c -lhello -L.</span><br></pre></td></tr></table></figure>

<p>create static library in GCC:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -c hello.c -o libhello.o</span><br></pre></td></tr></table></figure>

<p>Link libhello.o to executable:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc test.c libhello.o</span><br></pre></td></tr></table></figure>

<h3 id="Operating-system"><a href="#Operating-system" class="headerlink" title="Operating system"></a>Operating system</h3><p>Abstractions provided by OS<br><img src="os_abstractions.png" alt></p>
<h4 id="classes-of-exceptions"><a href="#classes-of-exceptions" class="headerlink" title="classes of exceptions"></a>classes of exceptions</h4><h5 id="synchronous-exceptions"><a href="#synchronous-exceptions" class="headerlink" title="synchronous exceptions"></a>synchronous exceptions</h5><p>caused by events as the result of executing an instruction.</p>
<h6 id="traps"><a href="#traps" class="headerlink" title="traps"></a>traps</h6><p>intentional. returns control to next instruction. (breakpoint)</p>
<h6 id="faults"><a href="#faults" class="headerlink" title="faults"></a>faults</h6><p>unintentional but possibly recoverable. page faults.<br>page fault: the memory address requested is not available.<br>case 1: the address is invalid -&gt; segmentation fault(SIGSEG).<br>case 2(minor): the page is loaded in memory but it is not marked in memory management unit -&gt; register in MMU.<br>case 3(major): the page is not loaded -&gt; load page from disk.</p>
<p>For case 1, the OS will send SIGSEG to the process and terminate the process. Thus unrecoverable.<br>For case2, case 3, the OS will do the corresponding handle and return the instructions points. Thus the instruction will do again.</p>
<h6 id="aborts"><a href="#aborts" class="headerlink" title="aborts"></a>aborts</h6><p>unintentional and unrecoverable. parity error.</p>
<h5 id="Asynchronous-exceptions"><a href="#Asynchronous-exceptions" class="headerlink" title="Asynchronous exceptions"></a>Asynchronous exceptions</h5><p>caused by events external to the processor.<br>Examples: 1. IO interrupts(ctrl-c). 2. hard reset interrupt(reset button). 3. soft reset interrupt(ctrl-alt-delete).<br><img src="fault.png" alt></p>
<h3 id="process"><a href="#process" class="headerlink" title="process"></a>process</h3><p>scheduler(parts of kernel) will do following things.</p>
<ol>
<li>decides whether to preempt the current process</li>
<li>selects a previously preempted process</li>
<li>preempts the current process</li>
<li>restart the scheduled process</li>
</ol>
<p>In order to restart the preempted process, context need to be stored.<br>context contains: </p>
<ol>
<li>cpu (register, value, status)</li>
<li>kernel (environment valiables, process table, page table, file table)</li>
<li>memory (user’s stack, kernel’s stack, code, data)</li>
</ol>
<p>context switch:</p>
<ol>
<li>system call(read, sleep)</li>
<li>timer interrupt (scheduler)</li>
</ol>
<table>
<thead>
<tr>
<th>process status</th>
<th>action</th>
</tr>
</thead>
<tbody><tr>
<td>stop</td>
<td>receiving a signal(SIGSTOP, SIGTSTP, SITTTIN, SIGTTOU)</td>
</tr>
<tr>
<td>running</td>
<td>receiving a SIGCONT</td>
</tr>
<tr>
<td>terminated</td>
<td>exit(), return from main, signal</td>
</tr>
</tbody></table>
<p>fork(void): return 0 to child, PID to parent, -1 for error.<br>clone all the data in parent process except pid.</p>
<p>two process can share files for communicate. (stdout)</p>
<h4 id="Zombie"><a href="#Zombie" class="headerlink" title="Zombie"></a>Zombie</h4><p>A terminated child process will become zombie if the parent has not reaped.<br>If the parent process has be terminated, kernel will assign init (pid=1) to reap them.</p>
<p>Zombie will consume system memory resources -&gt; always reap zombies.</p>
<h4 id="Process-related-API"><a href="#Process-related-API" class="headerlink" title="Process related API"></a>Process related API</h4><p>pid_t waitpid(pid_t pid, int *status, int options);<br>pid_t wait(int *status);</p>
<p>if pid &gt; 0, the process will wait for specific child.<br>if pid = -1, the process will wait any child.<br>if there is no children, return -1. errno=ECHILD(the process has no child), errno=(EINTR)interrupted by a signal.<br>options = 0. </p>
<p>unsigned int sleep(unsigned int secs);<br>int pause(void);</p>
<p>int execve(const char* filename, const char* argv[], const char* envp[]);<br>if something wrong, return -1. otherwise, never return.<br>The new program will use the same process resource. The running stack will be replaced.</p>
<h4 id="unix-shell"><a href="#unix-shell" class="headerlink" title="unix shell"></a>unix shell</h4><p>application level program.<br>compare: kernel is the core of OS whoes jobs are managing the hardware resource. </p>
<p>variants of shell: bash, sh, csh, tcsh.</p>
<p>performs a sequence of read/evaluate steps and terminate. read: reads a command line. evalute: parse the command line and runs programs.</p>
<h3 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h3><h4 id="System-level-I-O-UNIX-IO"><a href="#System-level-I-O-UNIX-IO" class="headerlink" title="System-level I/O (UNIX IO)"></a>System-level I/O (UNIX IO)</h4><p>In Unix, all IO devices are modeled as files.<br>A socket is a file that is used to communicate with another process across a network. (other types include named pips, symbolic links, character and block devices)</p>
<p>Kernal data structure for files<br>Descriptor table: every process has one. index is descriptor, point to file table.<br>File table: opened file has one or more, shared by all process. file position, reference count, pointer to V-node table.<br>V-node table: every file has one, shared by all process. file type, file size, file access.</p>
<p>Normally, one descriptor in descriptor table corresponding to one file table(different descriptor corresponding to same file will not conflect).<br>However, dup2(fd1, fd2) will assign file table(fd1) to file table(fd2).</p>
<p>File table will be deleted by kernel if recerence count is zero.</p>
<p>Open files<br>Appication: announce intention to access an I/O device. However, the application will only keep track of descriptor. it can set the current file position explicitly by performing a seek operation.<br>Kernal: open the file, returns a small non-negative integer descriptor. keeps track of all information about the open file.<br>EOF: there is no EOF in files. It is just a condition triggered if the requested byte is more than bytes left to the end.</p>
<p>Close files:<br>application: will not access the file.<br>kernel: frees structures. restore the descriptor to a pool of available descriptor.</p>
<h4 id="RIO-Robust-IO"><a href="#RIO-Robust-IO" class="headerlink" title="RIO (Robust IO)"></a>RIO (Robust IO)</h4><p>wrappers that provide efficient and robust IO.<br>with no buff: read/write automatic deal with EINTR. EOF will return size instead of 0.<br>buff: read/write to buff. less read/write command-&gt;better performance.<br>rio_readn(int fd, void *usrbuf, size_t count)<br>rio_writen(int fd, void *usrbuf, size_t count)</p>
<h4 id="standard-IO"><a href="#standard-IO" class="headerlink" title="standard IO"></a>standard IO</h4><p>C standard library (libc.so). high level standard io.<br>abstract open files as streams -&gt; file descriptor and a buffer.<br>stdin(fd=0)<br>stdout(fd=1)<br>stderr(fd=2)<br>Similar to RIO.</p>
<pre><code>|Unix IO|standard io</code></pre><p>—–|——-|———–<br>prons|general, lowest over head. Metadata, async-signal-safe|efficiency. automatically short counts<br>cons |Shord counts is tricky and error prone. inefficient   |no metadata. not async-signal-safe. not good for network sockets</p>
<p>note: standard IO require fflush/fseek/fsetpos/rewind between write and read.</p>
<h3 id="VM"><a href="#VM" class="headerlink" title="VM"></a>VM</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/28/bignumber/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/bignumber/" itemprop="url">大数相乘以及快速幂</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T11:59:52+08:00">
                2019-06-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础知识/" itemprop="url" rel="index">
                    <span itemprop="name">基础知识</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>宏观上，我们认为数的相乘为constant time，即O(1). 然而，如果考虑到数的位数，那么乘法操作就变得复杂起来。<br>如果两个长度为N的数相乘，小学所讲的乘法运算复杂度为O(n^2) –&gt; 对每一位都要进行相乘运算。<br>另一个方法是karatsuba。<br><img src="bidnumber.png" alt><br>如图所示，基础思想为divide and conquer。<br>以下为c++代码。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_length</span><span class="params">(<span class="keyword">long</span> num)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		num /= <span class="number">10</span>;</span><br><span class="line">		length++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">karatsuba</span><span class="params">(<span class="keyword">long</span> x, <span class="keyword">long</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// x = a * 10^(length/2) + b</span></span><br><span class="line">	<span class="comment">// y = c * 10^(length/2) + d</span></span><br><span class="line">	<span class="comment">// x * y = ac * 10^length + bd + ((a + c)*(b + d) - ac - bd)*10^(length/2)</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (x &lt; <span class="number">10</span> &amp;&amp; y &lt; <span class="number">10</span>) <span class="keyword">return</span> x * y;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// calculate a b c d</span></span><br><span class="line">	<span class="keyword">int</span> length = max(get_length(x), get_length(y));</span><br><span class="line">	<span class="keyword">int</span> t = <span class="built_in">pow</span>(<span class="number">10</span>, length / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> a = x / t;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> b = x - a * t;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> c = y / t;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> d = y - c * t;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// z1 = ac, z2 = bd, z3 = (a+c)*(b+d) - z1 - z2</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> z1 = karatsuba(a, c);</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> z2 = karatsuba(b, d);</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> z3 = karatsuba((a + b), (c + d)) - z1 - z2;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> z1 * t*t + z2 + z3 * t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在写代码的时候，发现使用long并不会扩张int的取值范围。于是去百度，发现，long的位数由编译器来确定，c语言只规定long位数不低于int。<br>而我使用的VC，把long定义为4字节，同int一样。</p>
<p>快速幂：<br>求幂的时候，我们也可以用divide and conquer来缩短运算。如果把相乘看为O(1)，求N次幂显然需要O(N)次运算。<br>然而，我们可以让底数增大，这样相乘的次数就会减少。例如$2^4 = 2^2 * 2^2$.<br>于是，运算可以简化为O(logN)<br>以下是相应代码。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Power</span><span class="params">(<span class="keyword">double</span> base, <span class="keyword">int</span> exponent)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">exp</span> = <span class="built_in">abs</span>(exponent);</span><br><span class="line">    <span class="keyword">double</span> res = <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">exp</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">exp</span> &amp; <span class="number">1</span>) res *= base;</span><br><span class="line">        base *= base;</span><br><span class="line">        <span class="built_in">exp</span> &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> exponent &lt; <span class="number">0</span>? <span class="number">1</span>/res:res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/27/memory-in-c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/memory-in-c/" itemprop="url">C/C++中的内存管理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-27T23:00:28+08:00">
                2019-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础知识/" itemprop="url" rel="index">
                    <span itemprop="name">基础知识</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在了解内存管理之前，需要注意C语言中变量类型。<br>const：常数变量。static：静态变量。<br>局部变量（函数内部）。全局变量（非函数内部）。</p>
<p><img src="5memory_area.png" alt><br>可执行文件(exe)文件中储存在disk时，可以分为代码区(code area)，数据区(data area)，未初始化数据区(BSS).<br>在执行时，在系统内存中会另外生成栈区(stack)和堆区(heap)。<br>代码区：存放执行代码。有可能包含一些只读的常数变量。<br>数据区：存放已初始化全局变量，静态变量和常量数据。<br>未初始化数据区(BSS)：用来存放未初始化的全局变量。在程序运行时会对全部变量赋值0。<br>栈区(stack)：存放局部变量以及程序运行时需要的信息（包括函数调用返回地址，传递参数）。由系统自动静态分配。<br>堆区(heap)：由程序员分配释放。（malloc/free）。</p>
<p>栈/堆区别：<br>栈由系统控制分配释放，硬件方面有相应的适配，故效率极高。高地址到低地址。<br>堆有程序员控制分配释放，在执行时可能会存在碎片，因此效率相对较低。低地址到高地址。</p>
<p>内存对齐：<br>不同平台对对内存空间处理上不同。一些平台对特定类型数据只能从特定地址开始存取。<br>内存对齐可以减少读取周期，增加效率。<br>有三条规则：</p>
<ol>
<li>对于结构体，成员偏移量(内存所在位置)应为当前成员类型整数倍。</li>
<li>结构体所有数据成员对齐后，本身还要对齐，保证整个结构体占用内存大小是结构体最大数据成员的最小整数倍。</li>
<li>#pragma pack(n) 预编译指令使得所有成员对齐以n字节为准，不考虑规则二。<br>举例：<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BU1</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> number;             <span class="comment">//4字节</span></span><br><span class="line">    <span class="keyword">union</span> UBffer</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">char</span> buffer[<span class="number">13</span>];    <span class="comment">//填充3字节，该成员占16字节空间</span></span><br><span class="line">        <span class="keyword">double</span> number;</span><br><span class="line">    &#125;ubuf;</span><br><span class="line">    <span class="keyword">int</span> aa;                 <span class="comment">//占4字节空间,当前偏移量已补齐为24</span></span><br><span class="line">    <span class="keyword">double</span> dou;             <span class="comment">//占8字节空间</span></span><br><span class="line">&#125;bu;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>sizeof(BU1) = 4 + 4(补充) + 13 + 3(补充) + 4 + 8 + 4(补充)</p>
<pre><code class="c"><span class="class"><span class="keyword">struct</span> <span class="title">BU2</span></span>
<span class="class">{</span>
    <span class="keyword">int</span> number;             <span class="comment">//4字节</span>
    <span class="keyword">union</span> UBffer
    {
        <span class="keyword">char</span> buffer[<span class="number">13</span>];    <span class="comment">//填充3字节，该成员占16字节空间</span>
        <span class="keyword">int</span> number;
    }ubuf;
    <span class="keyword">double</span> aa;                 <span class="comment">//占8字节空间,当前偏移量已补齐为24</span>
    <span class="keyword">int</span> dou;             <span class="comment">//占4字节空间</span>
}bu;</code></pre>
<p>sizeof(BU2) = 4 + 13 + 7(补充) + 8 + 4 + 4(补充)</p>
<p>注意，如果在代码首部加上#pragma pack(1)，sizeof(BU1) = 4 + 13 + 4 + 8, sizeof(BU2) = 4 + 13 + 8 + 4</p>
<p>柔性数组机制，如果最后一个成员为数组，且大小为0，则该结构体大小不计算该数组。<br>C++中，struct本质上是public class，规定空类大小为1.<br>C中，空类大小为0.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/27/true-complemental-ones-complemental-code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李书赫">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404 Not Found">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/true-complemental-ones-complemental-code/" itemprop="url">原码，反码，补码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-27T11:32:47+08:00">
                2019-06-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在做题的时候遇到了相互转换的问题，于是在此做一个小结。<br>原码，即为数直接转换为二进制后的编码。负数与正数的差别为负数最高为为1，正数为0.<br>正数的反码和补码与原码相同。负数的反码为除最高位全部取反。负数的补码为反码加一。<br>如：<br>-5，原码1000 0101，反码1111 1010，补码1111 1011.<br>-0，原码1000 0000，反码1111 1111，补码0000 0000.</p>
<p>127 原码0111 1111，反码0111 1111，补码0111 1111.<br>-127 原码1111 1111，反码1000 0000，补码1000 0001.<br>我们发现，1000 0000这个状态没有使用。如果我们把它当作补码。<br>最高位为1，所以是负数，相应的反码0111 1111. 相应的原码1000 0000.<br>所以，1000 0000可以表示-128的补码。</p>
<p>因此，int（32位）取值范围为$-2^{32-1} – (2^{32-1}-1)$</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="李书赫">
            
              <p class="site-author-name" itemprop="name">李书赫</p>
              <p class="site-description motion-element" itemprop="description">It works on my machine</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李书赫</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
